{% extends 'admin/master.html' %}     
{% load static %} 
{% load poll_extras %}
{% if user.is_authenticated %}
{% block master %}
<div class="d-flex flex-column" id="content-wrapper">
    <div id="content">
        <div class="container-fluid">
            <h3 class="text-dark"><strong><span style="color: #303c54;">Student Attendance Database</span></strong></h3>

            <div id="student_attendance_database">
  
  <!-- The Modal -->
  <div class="modal" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">
  
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title"></h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
     <form  method="post" action="{% url 'update_attendance' %}">
                {% csrf_token %}
        <!-- Modal body -->
        <div class="modal-body">
            <div class="form-group ">
                <label for="attendence_roll" class="col-form-label ">Roll : </label>
                <input type="text" class="form-control" id="attendance_roll" name="attendance_roll">
              </div>

                <div class="form-group ">
                    <label for="attendence_date" class="col-form-label">Date : </label>
                    <input type="date" class="form-control" id="attendance_date" name="attendance_date">
                  </div>
                  <div class="form-group">
                    <label for="attendence_status" class="col-form-label">Status : </label>
                    <input type="text" class="form-control" id="attendence_status" name="attendance_status">
                  </div>
     
        </div>
  
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary" data-bs-dismiss="modal" >Save changes</button>
        </div>
   </form>
      </div>
    </div>
  </div>
                <div class="card shadow mt-3 mb-5">
                    <div class="card-body">
                        <div class="table-responsive table mt-2" id="dataTable-1" role="grid" aria-describedby="dataTable_info">
                            <table class="table my-0 table-hover" id="dataTable4">
                                <thead>
                                    <tr>
                                        <th style="min-width: 150px;">Name</th>
                                        <th style="min-width: 150px;">Register Number</th>
                                        <th style="min-width: 100px;">Date</th>
                                        <th style="min-width: 200px;">Study</th>
                                        <th style="min-width: 100px;">Time</th>
                                        <th style="min-width: 100px;">Attendance</th>
                                    </tr>
                                </thead>
                                <tbody id="my-div">
                           
                                    {% for attendance in attendances %}
                                    <tr class="clickable-row"  data-bs-toggle="modal" data-bs-target="#myModal" style="cursor: pointer;">
                                        {% studentdata attendance.user as data %}
                                        <td>{{data.name}}</td>
                                        <td>{{data.roll}}</td>
                                        <td>{{attendance.date}}</td>
                                        <td> {{data.degree}}-{{data.branch}}-{{data.batch}}</td>
                                        <td>{{ attendance.date }}</td>
                                        <td>{{ attendance.status }}</td>
                                    </tr>
                                    {% endfor %}
                      
                                    </tbody>
                                    <tfoot>
                                    <tr>
                                        <td>Name</td>
                                        <td>Register Number</td>
                                        <td><strong>Date</strong></td>
                                        <td>Study</td>
                                        <td>Time</td>
                                        <td>Attendence</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
    
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="{% static 'js/attendance.js' %}"></script>
<script src="{% static 'js/datatable.js' %}"></script>
<script src="{% static 'js/bootdatatable.js' %}"></script>

{% endblock master %}
{% endif %}